{% extends "website/base.html" %}
{% load web_extras %}
{% load static %}

{% block main %}
    <div id="padded-content">
        <h1>{{ account.username }}</h1>
        {% if userdata.image %}
            <img src="{% url 'website:get_image' userdata.image.id %}" style="max-height: 248px; max-width: 248px; min-height: 248px; min-width: 248px;">
        {% else %}
            <img src="{% static 'website/user_default_image.jpg' %}" alt="No image">
        {% endif %}

        {% if userdata.description %}
            <h4 style="margin-top: 45px;">Description</h4>
            <p>{{ userdata.description|linebreaks }}</p>
        {% endif %}

        <p style="padding-top: 5%;">Date joined: {{ account.date_joined }}</p>
        <p>Last online: {{ account.last_login }}</p>
        <br>
        <p>User score: {{ account|count_user_score }}</p>
        <h3 style="margin-top: 75;">User posts:</h3>
    </div>

    {% if acc_posts %}
            <ul>
            <div class="list">
                <li>
                    {% for post in acc_posts.all %}
                        <div class="list-element" style="{% cycle 'background-color: #f2f2f2;' 'background-color: #ffffff;' %}">
                            <div class="list-element-main">
                                <a href="{% url 'website:post' post.id %}" style="width: 100%;">
                                    {% if post.image %}
                                        <img src="{% url 'website:get_image' post.image.id %}">
                                    {% else %}
                                        <img src="{% static 'website/post_default_image.png' %}" alt="No image">
                                    {% endif %}

                                    <h3>{{ post.title }}</h3>
                                    <div class="list-text">
                                        {{ post.description }}
                                    </div>

                                </a>
                                {% if request.user.is_staff %}
                                    <a id="delete" href="{% url 'website:delete' 'post' post.id %}">
                                        <i class="fa fa-trash" style="color: #db3d3d; font-size: 24px;"></i>
                                    </a>
                                {% endif %}
                            </div>


                            <div class="like-dislike">
                                {% if request.user.is_authenticated %}
                                    <button
                                        id="like{{ post.id }}"
                                        type="button"
                                        onclick="like_post({{ post.id }});"
                                        style="{% if post|is_liked:request.user %}color: #00b300;{% else %}color: #000000;{% endif %}"
                                    >▲</button>

                                    <span id="score{{ post.id }}">{{ post|count_likes }}</span>

                                    <button
                                        id="dislike{{ post.id }}"
                                        type="button"
                                        onclick="dislike_post({{ post.id }});"
                                        style="{% if post|is_disliked:request.user %}color: #b30000;{% else %}color: #000000;{% endif %}"
                                    >▼</button>
                                {% else %}
                                    ▲ {{ post|count_likes }} ▼
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}

                </li>
            </div>
        </ul>
    {% endif %}
{% endblock %}